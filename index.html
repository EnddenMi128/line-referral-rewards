<script>
const LIFF_ID = "2009103012-Cm3dsFrN";

const GAS_URL =
"https://script.google.com/macros/s/AKfycbzC6J_P96NGCLf_4Po0gAT1XKku_BmyqziP7fdsZ84K5n8YzsXxppLfqIZeNt2YJ6kb/exec";

async function init() {
  await liff.init({ liffId: LIFF_ID });

  if (!liff.isLoggedIn()) {
    liff.login();
    return;
  }
}
init();

async function submitForm() {
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const ref = document.getElementById("ref").value.trim();

  if (!name || !phone) {
    alert("請填寫姓名與手機");
    return;
  }

  const profile = await liff.getProfile();
  const userId = profile.userId;

  const params = new URLSearchParams();
  params.append("name", name);
  params.append("phone", phone);
  params.append("ref", ref);
  params.append("userId", userId);

  await fetch(GAS_URL, {
    method: "POST",
    mode: "no-cors",
    body: params
  });

  document.getElementById("successMsg").style.display = "block";
}
</script>


